<div class="container mt-5">
  <!-- Success message alert -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div *ngIf="successDeleteMessage" class="alert alert-success">
    {{ successDeleteMessage }}
  </div>

  <!-- Subscription form -->
  <h3 class="mb-3">Souscrire à un Abonnement</h3>
  <form (ngSubmit)="submitSubscription(subscriptionForm.value)" #subscriptionForm="ngForm" class="mb-4">
    <!-- Form group for subscription name -->
    <div class="mb-3">
      <label for="name_subscription" class="form-label">Nom de l'abonnement</label>
      <input type="text" id="name_subscription" name="name_subscription" ngModel required class="form-control" #nameSubscription="ngModel">
      <!-- Error message for subscription name -->
      <div *ngIf="nameSubscription.invalid && nameSubscription.touched" class="alert alert-danger">
        Le nom de l'abonnement est requis.
      </div>
    </div>

    <!-- Form group for subscription price -->
    <div class="mb-3">
      <label for="price_subscription" class="form-label">Prix de l'abonnement (€)</label>
      <input type="number" id="price_subscription" name="price_subscription" ngModel required class="form-control" #priceSubscription="ngModel">
      <!-- Error message for subscription price -->
      <div *ngIf="priceSubscription.invalid && priceSubscription.touched" class="alert alert-danger">
        Le prix de l'abonnement est requis et doit être un nombre.
      </div>
    </div>

    <!-- Form group for subscription description -->
    <div class="mb-3">
      <label for="description_subscription" class="form-label">Description de l'abonnement</label>
      <textarea id="description_subscription" name="description_subscription" ngModel required class="form-control" #descriptionSubscription="ngModel"></textarea>
      <!-- Error message for subscription description -->
      <div *ngIf="descriptionSubscription.invalid && descriptionSubscription.touched" class="alert alert-danger">
        Une description de l'abonnement est requise.
      </div>
    </div>

    <!-- Form group for subscription duration -->
    <div class="mb-3">
      <label for="duration_subscription_d" class="form-label">Durée de l'abonnement (jours)</label>
      <input type="number" id="duration_subscription_d" name="duration_subscription_d" ngModel required class="form-control" #durationSubscription="ngModel">
      <!-- Error message for subscription duration -->
      <div *ngIf="durationSubscription.invalid && durationSubscription.touched" class="alert alert-danger">
        La durée de l'abonnement est requise et doit être un nombre.
      </div>
    </div>

    <!-- Submit button for the form -->
    <button type="submit" class="btn btn-primary" [disabled]="subscriptionForm.invalid">Souscrire</button>
  </form>

  <!-- Button to trigger the retrieval of subscriptions -->
  <button (click)="getSubscriptions()" class="btn btn-info mb-4">Afficher les Abonnements</button>

  <!-- List of subscriptions -->
  <div *ngIf="subscriptions.length > 0">
    <h3>Liste des Abonnements</h3>
    <ul class="list-group">
      <!-- Loop through each subscription and display its details -->
      <li class="list-group-item" *ngFor="let subscription of subscriptions">
        <strong>ID :</strong> {{ subscription.id_subscription }}<br>
        <strong>Nom :</strong> {{ subscription.name_subscription }}<br>
        <strong>Prix :</strong> {{ subscription.price_subscription }}€<br>
        <strong>Description :</strong> {{ subscription.description_subscription }}<br>
        <strong>Durée :</strong> {{ subscription.duration_subscription_d }} jours
        <!-- Delete button -->
        <button (click)="deleteSubscription(subscription.id_subscription)" class="btn btn-danger ms-2 mt-2">Supprimer</button>
      </li>
    </ul>
  </div>
</div>
