<div class="types-container">
  <div class="header">
    <h2>Types de produits</h2>
    <button class="add-btn" (click)="showForm = !showForm">
      {{ showForm ? 'Annuler' : 'Ajouter un type' }}
    </button>
  </div>

  @if (error) {
    <div class="alert error">{{ error }}</div>
  }

  @if (success) {
    <div class="alert success">{{ success }}</div>
  }

  @if (showForm) {
    <div class="type-form">
      <form (ngSubmit)="createType()">
        <div class="form-group">
          <label for="name">Nom*</label>
          <input
            id="name"
            type="text"
            [(ngModel)]="newType.name"
            name="name"
            placeholder="Ex: Crèmes hydratantes"
            required
            maxlength="200"
          >
        </div>

        <div class="form-group">
          <label for="description">Description*</label>
          <textarea
            id="description"
            [(ngModel)]="newType.description"
            name="description"
            placeholder="Description du type de produit"
            required
            rows="3"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="icon">Icône*</label>
          // Dans le template, remplacer la partie select par :
          <div class="form-group">
            <label for="icon">Icône*</label>
            <select
              id="icon"
              [(ngModel)]="newType.icon"
              name="icon"
              required
              class="icon-select"
            >
              <option value="">Sélectionner une icône</option>
              <option value="🧴">🧴 Crèmes & Lotions</option>
              <option value="👄">👄 Soins des lèvres</option>
              <option value="👁️">👁️ Soins des yeux</option>
              <option value="✨">✨ Soins visage</option>
              <option value="💅">💅 Soins des ongles</option>
              <option value="💆‍♀️">💆‍♀️ Massages</option>
              <option value="🛁">🛁 Soins corps</option>
              <option value="💄">💄 Maquillage</option>
              <option value="🌿">🌿 Naturel & Bio</option>
              <option value="🧪">🧪 Traitements spécifiques</option>
              <option value="☀️">☀️ Protection solaire</option>
              <option value="🌺">🌺 Parfums</option>
              <option value="💇‍♀️">💇‍♀️ Soins cheveux</option>
              <option value="🎁">🎁 Coffrets</option>
              <option value="⭐">⭐ Premium</option>
            </select>
          </div>

          // Ajouter ces styles pour améliorer l'apparence du sélecteur :
          .icon-select {
          width: 100%;
          padding: 0.75rem;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          font-size: 1rem;
          background-color: white;
          cursor: pointer;

          option {
          padding: 0.5rem;
          font-size: 1rem;
          }

          &:focus {
          outline: none;
          border-color: #4f46e5;
          box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
          }
          }

          <div class="form-actions">
            <button type="submit" [disabled]="isLoading">
              {{ isLoading ? 'Création...' : 'Créer le type' }}
            </button>
          </div>
      </form>
    </div>
  }

  <div class="types-list">
    @for (type of types; track type.id_type) {
      <div class="type-card">
        <div class="type-icon">{{ type.icon }}</div>
        <div class="type-content">
          <h3>{{ type.name }}</h3>
          <p>{{ type.description }}</p>
        </div>
        <div class="type-actions">
          <button class="edit-btn" (click)="editType(type)">
            ✏️ Modifier
          </button>
          <button class="delete-btn" (click)="confirmDelete(type)">
            🗑️ Supprimer
          </button>
        </div>
      </div>
    }
    @if (types.length === 0) {
      <div class="no-types">
        Aucun type de produit n'a été créé
      </div>
    }
  </div>
</div>
