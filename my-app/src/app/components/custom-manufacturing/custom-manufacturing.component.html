<div class="custom-manufacturing-container">
  <h2>Demande de fabrication sur mesure</h2>

  <form [formGroup]="manufacturingForm" (ngSubmit)="onSubmit()" class="manufacturing-form">
    <div class="form-group">
      <label>Ordonnance</label>
      <input 
        type="file" 
        (change)="onFileSelected($event)"
        accept=".pdf,.jpg,.jpeg,.png"
        required
      >
      <small>Format accepté: PDF, JPG, PNG</small>
    </div>

    <div class="form-group">
      <label>Notes supplémentaires</label>
      <textarea 
        formControlName="notes"
        rows="4"
        placeholder="Ajoutez des notes supplémentaires si nécessaire"
      ></textarea>
    </div>

    <div class="composition-details">
      <h3>Composition prescrite</h3>
      <div class="composition-list">
        <div *ngFor="let item of composition" class="composition-item">
          <span>{{ item.name }}</span>
          <span>{{ item.quantity }}{{ item.unit }}</span>
        </div>
      </div>
    </div>

    <div class="price-summary">
      <div class="price-line">
        <span>Montant total:</span>
        <span>{{ calculateTotal() | number:'1.2-2'}} €</span>
      </div>
      <div class="price-line deposit">
        <span>Acompte requis (30%):</span>
        <span>{{ calculateDeposit() | number:'1.2-2'}} €</span>
      </div>
    </div>

    <button 
      type="submit" 
      [disabled]="!manufacturingForm.valid || !selectedFile || loading"
      class="submit-button"
    >
      {{ loading ? 'Traitement en cours...' : 'Soumettre la demande' }}
    </button>
  </form>
</div> 