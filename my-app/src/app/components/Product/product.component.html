
<div class="products-grid">
  @for (product of filteredProducts; track product.id_product) {
    <div class="product-card">
      <div class="product-content">
        <h3>{{ product?.name }}</h3>
        <p class="description">{{ product?.description }}</p>

        <div class="price-container">
          @if (product && product.activePromotion) {
            <div class="promo-info">
              <span class="original-price">{{ product.price | currency :'EUR' }}</span>
              <span class="promo-price">{{ product.promotionPrice | currency:'EUR' }}</span>
              <span class="discount-tag">
                    -{{ product.activePromotion.discountPercentage }}%
                  </span>
            </div>
          } @else {
            <span class="regular-price">{{ product?.price | currency:'EUR' }}</span>
          }
        </div>

        <div class="stock-info">
              <span [class.low-stock]="product.stock < 5">
                Stock: {{ product?.stock || 0 }}
              </span>
        </div>

        <button
          class="add-to-cart-btn"
          [disabled]="!product?.stock || product.stock <= 0"
          (click)="addToCart(product)"
        >
          @if (!product?.stock || product.stock <= 0) {
            Rupture de stock
          } @else {
            Ajouter au panier
          }
        </button>
      </div>
    </div>
  }

  @if (filteredProducts.length === 0) {
    <div class="no-products">
      <p>Aucun produit disponible</p>
    </div>
  }
</div>
